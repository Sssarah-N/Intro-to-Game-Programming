#ifndef LEVELB_H
#define LEVELB_H

#include "Scene.h"
#include "Dialoge.h"
#include "LevelA.h"
#include "ShaderProgram.h"


class LevelB : public Scene {
private:
    TVstates TVstates;
    bool displayingBoard = false;
    bool displayingMom = false;
    bool displayingDad = false;
    bool displayingBlue = false;
    bool displayingBlood = false;
    bool knock = false;
    bool playHeartbeat = false;
    bool canRun = false;
    bool hasRun = false;
    int spacePressCount = 0;
    ShaderProgram shader;
    float startTime = 0.0f;
    float deltatime;
    bool waitingForInspector = false;
    float inspectorWaitTimer = 0.0f;
    
    unsigned int mLevelData1[LEVEL_WIDTH * LEVEL_HEIGHT] = {
        0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        530, 531, 531, 531, 531, 531, 531, 531, 531, 531, 531, 531, 531, 531, 532, 0  , 0  , 0  ,
        625, 2  , 2  , 2  , 2  , 2  , 2  , 2  , 2  , 2  , 2  , 2  , 2  , 2  , 629, 0  , 0  , 0  ,
        625, 50 , 50 , 50 , 50 , 50 , 50 , 50 , 50 , 50 , 50 , 50 , 50 , 50 , 629, 0  , 0  , 0  ,
        625, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 629, 0  , 0  , 0  ,
        625, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 629, 0  , 0  , 0  ,
        625, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 629, 0  , 0  , 0  ,
        625, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 629, 0  , 0  , 0  ,
        625, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 629, 0  , 0  , 0  ,
        625, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 629, 0  , 0  , 0  ,
        625, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 386, 629, 0  , 0  , 0  ,
        722, 723, 723, 723, 723, 723, 674, 386, 676, 723, 723, 723, 723, 723, 724, 0  , 0  , 0  ,
        530, 531, 531, 531, 531, 531, 578, 386, 629, 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        625, 2  , 2  , 2  , 2  , 2  , 2  , 386, 629, 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        625, 50 , 50 , 50 , 50 , 50 , 50 , 386, 629, 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        625, 386, 386, 386, 386, 386, 386, 386, 629, 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        625, 386, 386, 386, 386, 386, 386, 386, 629, 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        625, 386, 386, 386, 386, 386, 386, 386, 629, 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 
        625, 386, 386, 386, 386, 386, 386, 386, 629, 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        625, 386, 386, 386, 386, 386, 386, 386, 629, 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        722, 723, 723, 723, 723, 723, 723, 723, 724, 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
    };

    unsigned int mLevelData2[LEVEL_WIDTH * LEVEL_HEIGHT] = {
        0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 0  , 0  , 0  , 587, 588, 0  , 491, 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        0  , 691, 692, 694, 694, 0  , 635, 636, 0  , 539, 0  , 0  , 0  , 546, 0  , 0  , 0  , 0  ,
        0  , 739, 740, 742, 742, 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 594, 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 349, 350, 351, 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        0  , 0  , 304, 397, 398, 399, 400, 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 445, 446, 447, 0  , 0  , 0  , 589, 161, 162, 163, 590, 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 0  , 448, 0  , 0  , 0  , 0  , 637, 209, 210, 211, 638 , 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 257, 258, 259, 0  , 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 0  , 0  , 0  , 304, 249, 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 0  , 0  , 0  , 0  , 297, 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
        0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  , 0  ,
    };

    void displayTV();
    void displayBoard();
    void displayImage(Texture2D texture, bool displayclosed = false);
    void displayBlood();

public:
    static constexpr float TILE_DIMENSION       = 55.0f,
                            ACCELERATION_OF_GRAVITY = 981.0f,
                            END_GAME_THRESHOLD      = 800.0f;

    // LevelB();
    LevelB(Vector2 origin, const char *bgHexCode, Music bgm);
    ~LevelB();
    
    void initialise() override;
    void update(float deltaTime) override;
    void render() override;
    void renderUI() override;
    void shutdown() override;
    void drawUI(Texture2D texture, Vector2 pos, float scale = 1.0f, unsigned char opacity=255);
    bool isAround(Entity* entity);
    Vector2 getGridPos(int row, int col);
    
};

#endif